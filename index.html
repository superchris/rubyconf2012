<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Machine Learning for...</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link href="css/theme/gaslight/images/32x32icon.png" rel="shortcut icon" type="image/vnd.microsoft.icon" />
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/gaslight/gaslight.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <ul id='bars'>
      <li class='brand1'></li>
      <li class='brand2'></li>
      <li class='brand3'></li>
    </ul>
    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <h2>Machine Learning</h2>
          <h3>for &lt;insert cliche here&gt;</h3>
          <h4>Chris Nelson</h4>

          <div id="logo">
            <img src="css/theme/gaslight/images/logo.png" />
          </div>
        </section>
        <section>
          <h2 class="center">Who am I?</h2>
        </section>
        <section>
          <H2 class="center">What's Machine Learning?</H2>
        </section>

        <section>
          <h2 class="center">Depth not breadth</h2>

        </section>
        <section>
          <p class='there_will center'>There will be Math</p>
        </section>

        <section>
          <h2>The Project</h2>
          <ul>
            <li>Recommending home improvements</li>
            <li>Bunches of rules</li>
            <li>Expressed as cuke tables</li>
          </ul>
        </section>
        <section>
          <h2>A simple rule</h2>
          <table class="rule">
            <tr>
              <th>Has pool?</th>
              <th>Has efficient pump?</th>
              <th>Upgrade recommended</th>
            <tr>
              <td>No</td>
              <td>No</td>
              <td>No</td>
            <tr>
              <td>Yes</td>
              <td>No</td>
              <td>Yes</td>
            </tr>
            <tr>
              <td>Yes</td>
              <td>Yes</td>
              <td>No</td>
            </tr>
          </table>
        </section>
        <section>
          <h2>Turns into simple code</h2>
          <pre><code class="ruby">
class PoolPumpRule
  def evaluate(property)
    property.has_pool? &amp;&amp; property.has_efficient_pool_pump?
  end
end
          </code></pre>
        </section>
        <section>
          <H2>More interesting example</H2>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>>= 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          </table>
        </section>

        <section>
          <h2>Turns into more code</h2>
          <pre><code class="ruby">
class ReplaceLightingRule
  def evaluate(property)
    if property.lighting_type == "Screw-in incandescent" || property.lighting_type == "Screw-in CFL"
      true
    elsif property.lighting_type == "Pin-based fluorescent"
      false
    elsif property.lighting_type == "Don't Know"
      property.lighting_installed_at < 10.years.ago
    end
  end
end
          </code></pre>

        </section>
        <section>
          <h2>Woot!</h2>
          <h3>2 down, 30-something to go!</h3>
          <h4>With unit tests</h4>
          <h5>By the end of the week</h5>
          <p>Le sigh..</p>
        </section>
        <section>
          <img src="james_wizard.jpeg" />
        </section>
        <section>
          <h2 class="center">Decision trees</h2>
        </section>
        <section>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>>= 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          </table>
        </section>
        <section>
          <embed src="tree.svg" type="image/svg+xml" />
        </section>
        <section>
          <embed src="perverse_tree.svg" type="image/svg+xml" />
        </section>
        <section>
          <h2>ID3</h2>
          <ul>
            <li>Iterative Dichotomiser</li>
            <li>Ross Quinlan</li>
            <li>Entropy</li>
          </ul>
        </section>
        <section>
          <h2>Entropy</h2>
          <img src="entropy.png" width="500" />
          <p>n = number of possible values for the given attribute</p>
          <p>fs(j) = frequency that the jth value occurs</p>
        </section>
        <section>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>>= 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          </table>
        </section>

        <section>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>>= 10 yrs ago</td>
          <td class="red">not recommended</td>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>< 10 yrs ago</td>
          <td class="red">not recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>< 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>>= 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>< 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>>= 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>>= 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>< 10 yrs ago</td>
          <td class="red">not recommended</td>
          </tr>
          </table>
          <p>-(5/8 * log2(5/8) + 3/8 * log2(3/8)) = 0.954434002924965</p>
        </section>
        <section>
          <h2>Gain</h2>
          <p>What is the effect on entropy if branch on a given attribute?</p>
          <img src="gain.png" width="500"/>
          <ul>
            <li>m = number of values for attribute</li>
            <li>fs(Ai) = frequency that the ith value occurs</li>
            <li>E(SAi) = entropy of the results for rows where an attribute has a given value</li>
          </ul>
        </section>
        <section>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td class="blue">Pin-based flourescent</td>
          <td>>= 10 yrs ago</td>
          <td class="red">not recommended</td>
          </tr>
          <tr>
          <td class="blue">Pin-based flourescent</td>
          <td>< 10 yrs ago</td>
          <td class="red">not recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>< 10 yrs ago</td>
          <td >recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          </table>
          <p>Entropy(type=Pin based fluorescent) = </p>
          <p>-(1 * log2(1) + 0 * log2(0)) = 0</p>

        </section>
        <section>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>>= 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td class="blue">Screw-in incandescent</td>
          <td>< 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td class="blue">Screw-in incandescent</td>
          <td>>= 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          </table>
          <p>Entropy(type=Screw-in incandescent) = 0</p>

        </section>

        <section>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>>= 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>< 10 yrs ago</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>< 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>>= 10 yrs ago</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td class="blue">Don't Know</td>
          <td>>= 10 yrs ago</td>
          <td class="green">recommended</td>
          </tr>
          <tr>
          <td class="blue">Don't Know</td>
          <td>< 10 yrs ago</td>
          <td class="red">not recommended</td>
          </tr>
          </table>
          <p>Entropy(type=Don't Know)</p>
          <p>-(0.5 * log2(0.5) + 0.5 * log2(0.5)) = 1</p>
        </section>
        <section>
          <h2>Calculating Gain</h2>
          <p>Proportional entropy partioned by lighting type:</p>
          <p>1/4(0) + 1/4(0) + 1/4(0) + 1/4(0.25)</p>
          <p>Gain(lighting type) = 0.95 - 0.25 = 0.70</p>
        </section>
        <section>
          <h3 class="center">Gain(installed on) = 0.95 - 0.90 = 0.05</h3>
        </section>
        <section>
          <h2 class="center">Decision trees in ruby</h2>
        </section>
        <section>
          <h2>ai4r</h2>
          <ul>
            <li>Sergio Fierens</li>
            <li>Lots of algorithms</li>
            <ul>
              <li>Neural networks</li>
              <li>Genetic Alogorithms</li>
              <li>Classifiers:</li>
              <ul>
                <li>ID3</li>
              </ul>
            </ul>
            <li>Outputs the tree as code</li>
          </ul>
        </section>
        <section><H2 class="center">Demo time</H2></section>
        <section>
          <H2 class="center">That's cool, but...</H2>
        </section>
        <section>
          <table><tr>
          <th>type</th>
          <th>last_replaced</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>1999</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Pin-based flourescent</td>
          <td>2005</td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>2009</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>1997</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in CFL</td>
          <td>2010</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Screw-in incandescent</td>
          <td>1990</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>1992</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td>2007</td>
          <td>not recommended</td>
          </tr>
          </table>
        </section>
        <section>
          <h2>Entropy Bias</h2>
          <ul>
            <li>Entropy(S, installed_at = 1990) = 0</li>
            <li>Gain = Entropy(S) - 0 = 0.95 - 0 = 0.95</li>
            <li>It will always pick installed_at!</li>
            <li>Even though it's not really predictive :(</li>
          </ul>
        </section>

        <section>
          <h2>Handling continuous attributes</h2>
          <ul>
            <li>What if we "discretize" them?</li>
            <li>Need to figure out where to split</li>
            <ul>
              <li>Sort all the uniq values</li>
              <li>Build a list of all the halfway points as candidates</li>
              <li>Measure the gain from each</li>
              <li>Split point with highest gain wins</li>
            </ul>
          </ul>

        </section>
        <section>
          <h2>C 4.5</h2>
          <ul>
            <li>Later algorithm by Quinlan</li>
            <li>Handles continuous attributes</li>
            <li>Among other things</li>
          </ul>
        </section>
        <section>
          <h2>decisiontree</h2>
          <ul>
            <li>Ilya Grigorik</li>
            <li>Outputs tree graphically</li>
            <li>Deals with continuous attributes correctly</li>
            <li>adds Array#entropy</li>
          </ul>
        </section>
        <section>
          <H2 class="center">Let's see it</H2>
        </section>
        <section>
          <H2 class="center">Rules or examples?</H2>
        </section>
      <section>
          <table class="small"><tr>
          <th>type</th>
          <th>cgf_efficiency</th>
          <th>gwh_efficiency</th>
          <th>hp_efficiency</th>
          <th>last_replaced</th>
          <th>constructed</th>
          <th>result</th>
          </tr>
          <tr>
          <td>Electric resistance</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Gas central furnace</td>
          <td>More than 78% AFUE</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Gas central furnace</td>
          <td>78% AFUE or lower</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Gas central furnace</td>
          <td>Don't Know</td>
          <td></td>
          <td></td>
          <td>>= 18 yrs ago</td>
          <td></td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Gas central furnace</td>
          <td>Don't Know</td>
          <td></td>
          <td></td>
          <td>< 18 yrs ago</td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Electric central furnace</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Gas wall heater</td>
          <td></td>
          <td>More that 65% AFUE</td>
          <td></td>
          <td></td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Gas wall heater</td>
          <td></td>
          <td>65% AFUE or lower</td>
          <td></td>
          <td></td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Gas wall heater</td>
          <td></td>
          <td>Don't Know</td>
          <td></td>
          <td>>= 18 yrs ago</td>
          <td></td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Gas wall heater</td>
          <td></td>
          <td>Don't Know</td>
          <td></td>
          <td>< 18 yrs ago</td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Heat pump</td>
          <td></td>
          <td></td>
          <td>More than 7.7 HSPF</td>
          <td></td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Heat pump</td>
          <td></td>
          <td></td>
          <td>7.7 HSPF or lower</td>
          <td></td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Heat pump</td>
          <td></td>
          <td></td>
          <td>Don't Know</td>
          <td>>= 15 yrs ago</td>
          <td></td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Heat pump</td>
          <td></td>
          <td></td>
          <td>Don't Know</td>
          <td>< 15 yrs ago</td>
          <td></td>
          <td>not recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td><= 1978</td>
          <td>recommended</td>
          </tr>
          <tr>
          <td>Don't Know</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>>= 1979</td>
          <td>not recommended</td>
          </tr>
          </table>
        </section>
        <section>
          <H2>Decision Table</H2>
          <UL>
            <li>decision_table</li>
            <li>very simple gem by your humble presenter</li>
            <li>for when you have rules expressed in tabular format</li>
            <UL>
              <li>You already know what order to do the comparisons</li>
              <li>Simple brute-force approach</li>
            </UL>
          </UL>
        </section>
        <section>
          <H2 class="center">decision_table example</H2>
        </section>
        <section>
          <h2>Lessons learned</h2>
          <ul>
            <li>Don't write the code yourself!</li>
            <UL>
              <li>still need test cases tho</li>
            </UL>
            <li>Understand your algorithm</li>
            <li>Simplest thing than can possibly work</li>
          </ul>
        </section>
        <section>
          <h3>Resources</h3>
          <ul>
            <li>igvita.com</li>
            <li>decisiontrees.net</li>
            <li>http://onlamp.com/pub/a/python/2006/02/09/ai_decision_trees.html</li>
          </ul>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/highlight.js', async: true, callback: function() { window.hljs.initHighlightingOnLoad(); } },
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'lib/js/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'lib/js/data-markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/zoom-js/zoom.js', condition: function() { return !!document.body.classList; } },
          { src: '/socket.io/socket.io.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
          { src: 'plugin/speakernotes/client.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } }
        ]
      });
    </script>
  </body>
</html>

